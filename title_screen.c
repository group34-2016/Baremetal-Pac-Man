#include "title_screen.h"
#define GHOST_WIDTH 14
#define GHOST_HEIGHT 14

void fake_wait() {
  for (volatile int i = 0; i < 5000000; ++i);
}


void draw_bitmap(uint32_t x, uint32_t y, uint32_t width, uint32_t height, uint16_t *sprite, volatile unsigned char *fb) {
  for (int i = 0; i < width; ++i) {
    for (int j = 0; j < height; ++j) {
      draw_pixel(x + i, y + j, fb, sprite[i + (width * j)]);
    }
  }
}

void draw_title_screen(volatile unsigned char *fb, uint32_t offset) {
  uint16_t blinky_colour = 0xf800u;
  uint16_t inky_colour   = 0x07ffu;
  uint16_t pinky_colour  = 0xfd1fu;
  uint16_t clyde_colour  = 0xfda9u;

  uint16_t pinky_right[196] = {0x0000,0x0000,0x0000,0x0000,0x0000,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0x0000,0x0000,0x0000,0x0000,0x0000
  ,0x0000,0x0000,0x0000,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0x0000,0x0000,0x0000
  ,0x0000,0x0000,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0x0000,0x0000
  ,0x0000,0xfd1f,0xfd1f,0xfd1f,0xffff,0xffff,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xffff,0xffff,0xfd1f,0x0000
  ,0x0000,0xfd1f,0xfd1f,0xffff,0xffff,0xffff,0xffff,0xfd1f,0xfd1f,0xffff,0xffff,0xffff,0xffff,0x0000
  ,0x0000,0xfd1f,0xfd1f,0xffff,0xffff,0x01bf,0x01bf,0xfd1f,0xfd1f,0xffff,0xffff,0x01bf,0x01bf,0x0000
  ,0xfd1f,0xfd1f,0xfd1f,0xffff,0xffff,0x01bf,0x01bf,0xfd1f,0xfd1f,0xffff,0xffff,0x01bf,0x01bf,0xfd1f
  ,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xffff,0xffff,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xffff,0xffff,0xfd1f,0xfd1f
  ,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f
  ,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f
  ,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f
  ,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f,0xfd1f
  ,0xfd1f,0xfd1f,0x0000,0xfd1f,0xfd1f,0xfd1f,0x0000,0x0000,0xfd1f,0xfd1f,0xfd1f,0x0000,0xfd1f,0xfd1f
  ,0xfd1f,0x0000,0x0000,0x0000,0xfd1f,0xfd1f,0x0000,0x0000,0xfd1f,0xfd1f,0x0000,0x0000,0x0000,0xfd1f};

  uint16_t inky_right[196] = {0x0000,0x0000,0x0000,0x0000,0x0000,0x07ff,0x07ff,0x07ff,0x07ff,0x0000,0x0000,0x0000,0x0000,0x0000
  ,0x0000,0x0000,0x0000,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x0000,0x0000,0x0000
  ,0x0000,0x0000,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x0000,0x0000
  ,0x0000,0x07ff,0x07ff,0x07ff,0xffff,0xffff,0x07ff,0x07ff,0x07ff,0x07ff,0xffff,0xffff,0x07ff,0x0000
  ,0x0000,0x07ff,0x07ff,0xffff,0xffff,0xffff,0xffff,0x07ff,0x07ff,0xffff,0xffff,0xffff,0xffff,0x0000
  ,0x0000,0x07ff,0x07ff,0xffff,0xffff,0x01bf,0x01bf,0x07ff,0x07ff,0xffff,0xffff,0x01bf,0x01bf,0x0000
  ,0x07ff,0x07ff,0x07ff,0xffff,0xffff,0x01bf,0x01bf,0x07ff,0x07ff,0xffff,0xffff,0x01bf,0x01bf,0x07ff
  ,0x07ff,0x07ff,0x07ff,0x07ff,0xffff,0xffff,0x07ff,0x07ff,0x07ff,0x07ff,0xffff,0xffff,0x07ff,0x07ff
  ,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff
  ,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff
  ,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff
  ,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff,0x07ff
  ,0x07ff,0x07ff,0x0000,0x07ff,0x07ff,0x07ff,0x0000,0x0000,0x07ff,0x07ff,0x07ff,0x0000,0x07ff,0x07ff
  ,0x07ff,0x0000,0x0000,0x0000,0x07ff,0x07ff,0x0000,0x0000,0x07ff,0x07ff,0x0000,0x0000,0x0000,0x07ff};

  uint16_t clyde_right[196] = {0x0000,0x0000,0x0000,0x0000,0x0000,0xfda9,0xfda9,0xfda9,0xfda9,0x0000,0x0000,0x0000,0x0000,0x0000
  ,0x0000,0x0000,0x0000,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0x0000,0x0000,0x0000
  ,0x0000,0x0000,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0x0000,0x0000
  ,0x0000,0xfda9,0xfda9,0xfda9,0xffff,0xffff,0xfda9,0xfda9,0xfda9,0xfda9,0xffff,0xffff,0xfda9,0x0000
  ,0x0000,0xfda9,0xfda9,0xffff,0xffff,0xffff,0xffff,0xfda9,0xfda9,0xffff,0xffff,0xffff,0xffff,0x0000
  ,0x0000,0xfda9,0xfda9,0xffff,0xffff,0x01bf,0x01bf,0xfda9,0xfda9,0xffff,0xffff,0x01bf,0x01bf,0x0000
  ,0xfda9,0xfda9,0xfda9,0xffff,0xffff,0x01bf,0x01bf,0xfda9,0xfda9,0xffff,0xffff,0x01bf,0x01bf,0xfda9
  ,0xfda9,0xfda9,0xfda9,0xfda9,0xffff,0xffff,0xfda9,0xfda9,0xfda9,0xfda9,0xffff,0xffff,0xfda9,0xfda9
  ,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9
  ,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9
  ,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9
  ,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9,0xfda9
  ,0xfda9,0xfda9,0x0000,0xfda9,0xfda9,0xfda9,0x0000,0x0000,0xfda9,0xfda9,0xfda9,0x0000,0xfda9,0xfda9
  ,0xfda9,0x0000,0x0000,0x0000,0xfda9,0xfda9,0x0000,0x0000,0xfda9,0xfda9,0x0000,0x0000,0x0000,0xfda9};

  uint16_t blinky_right[196] = {0x0000,0x0000,0x0000,0x0000,0x0000,0xf800,0xf800,0xf800,0xf800,0x0000,0x0000,0x0000,0x0000,0x0000
  ,0x0000,0x0000,0x0000,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0x0000,0x0000,0x0000
  ,0x0000,0x0000,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0x0000,0x0000
  ,0x0000,0xf800,0xf800,0xf800,0xffff,0xffff,0xf800,0xf800,0xf800,0xf800,0xffff,0xffff,0xf800,0x0000
  ,0x0000,0xf800,0xf800,0xffff,0xffff,0xffff,0xffff,0xf800,0xf800,0xffff,0xffff,0xffff,0xffff,0x0000
  ,0x0000,0xf800,0xf800,0xffff,0xffff,0x01bf,0x01bf,0xf800,0xf800,0xffff,0xffff,0x01bf,0x01bf,0x0000
  ,0xf800,0xf800,0xf800,0xffff,0xffff,0x01bf,0x01bf,0xf800,0xf800,0xffff,0xffff,0x01bf,0x01bf,0xf800
  ,0xf800,0xf800,0xf800,0xf800,0xffff,0xffff,0xf800,0xf800,0xf800,0xf800,0xffff,0xffff,0xf800,0xf800
  ,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800
  ,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800
  ,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800
  ,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800,0xf800
  ,0xf800,0xf800,0x0000,0xf800,0xf800,0xf800,0x0000,0x0000,0xf800,0xf800,0xf800,0x0000,0xf800,0xf800
  ,0xf800,0x0000,0x0000,0x0000,0xf800,0xf800,0x0000,0x0000,0xf800,0xf800,0x0000,0x0000,0x0000,0xf800};

  uint32_t x     = 229;
  uint32_t y     = 50;

  print_string("CHARACTER / NICKNAME", get_centre_x(20 * 8), y, offset, fb);
  y += 40;

  fake_wait();
  draw_bitmap(x, y + offset, GHOST_WIDTH, GHOST_HEIGHT, blinky_right, fb);
  fake_wait();
  print_string_colour("-SHADOW"  , blinky_colour, x + 30, y + 3, offset, fb);
  fake_wait();
  print_string_colour("FINN"     , blinky_colour, x + 150, y + 3, offset, fb);
  y += 40;

  fake_wait();
  draw_bitmap(x, y + offset, GHOST_WIDTH, GHOST_HEIGHT, pinky_right, fb);
  fake_wait();
  print_string_colour("-SPEEDY"  , pinky_colour , x + 30, y + 3, offset, fb);
  fake_wait();
  print_string_colour("WILL"     , pinky_colour , x + 150, y + 3, offset, fb);
  y += 40;

  fake_wait();
  draw_bitmap(x, y + offset, GHOST_WIDTH, GHOST_HEIGHT, inky_right, fb);
  fake_wait();
  print_string_colour("-BASHFUL" , inky_colour  , x + 30, y + 3, offset, fb);
  fake_wait();
  print_string_colour("SURAJ"    , inky_colour  , x + 150 - 8, y + 3, offset, fb);
  y += 40;

  fake_wait();
  draw_bitmap(x, y + offset, GHOST_WIDTH, GHOST_HEIGHT, clyde_right, fb);
  fake_wait();
  print_string_colour("-POKEY"   , clyde_colour , x + 30, y + 3, offset, fb);
  fake_wait();
  print_string_colour("RIKU"     , clyde_colour , x + 150, y + 3, offset, fb);
  y += 40;

  fake_wait();
  print_string("PRESS ANY DIRECTION TO START", get_centre_x(28 * 8), y, offset, fb);
}
